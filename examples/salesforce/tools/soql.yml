mxcp: 1

tool:
  name: "soql"
  description: "Use this tool when you need to query specific fields from a single Salesforce object, similar to SQL. It's ideal for getting structured data like 'all accounts in New York' or 'all contacts for a specific account'. SOQL is more precise than search or SOSL because you specify exactly which fields you want. For example, use this when you need to get a list of accounts with their phone numbers and addresses, or when you need to find all opportunities over a certain amount. If you need to search across multiple objects or don't know the exact field names, use the search or sosl tools instead."
  language: python
  source:
    file: ../python/salesforce_endpoints.py
  parameters:
    - name: query
      type: string
      description: "The SOQL query to execute. The query should follow SOQL syntax: SELECT field1, field2 FROM object_type [WHERE conditions] [ORDER BY field] [LIMIT n]. For example: 'SELECT Id, Name, Phone FROM Account WHERE BillingCity = 'New York' LIMIT 10'"
      examples:
        - "SELECT Id, Name FROM Account"
        - "SELECT Id, Name, Email FROM Contact WHERE AccountId = '001xx000003DIloAAG'"
        - "SELECT Id, Name, Amount, StageName FROM Opportunity WHERE IsWon = true ORDER BY Amount DESC LIMIT 5"
  return:
    type: array
    items:
      type: object
  annotations:
    readOnlyHint: true
  tests:
    - name: "Basic Account query"
      description: "Verify SOQL query returns array of Account records"
      arguments:
        - key: query
          value: "SELECT Id, Name FROM Account LIMIT 1"
    - name: "Query with LIMIT"
      description: "Verify SOQL query respects LIMIT clause"
      arguments:
        - key: query
          value: "SELECT Id FROM Account LIMIT 2"
    - name: "Contact query structure"
      description: "Verify Contact query returns expected fields"
      arguments:
        - key: query
          value: "SELECT Id, FirstName, LastName FROM Contact LIMIT 1"
    - name: "Results should not contain attributes"
      description: "Verify attributes field is filtered out from results"
      arguments:
        - key: query
          value: "SELECT Id, Name FROM Account LIMIT 1"

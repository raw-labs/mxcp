# yaml-language-server: $schema=./src/raw/config/schemas/endpoint-schema-1.0.0.json
raw: "1.0.0"
tool:
  name: hello
  description: Hello world example
  tags:
    - helloworld
  code: snapi
  declaration: hello_world
  codeFile: hello-world.snapi
  format: json
  security:
    public: true
  computeClass: normal
  enabled: true
  parameters:
    - name: name
      type: string
      description: User's name
      required: true
      minLength: 1
      maxLength: 100
      examples: ["John Doe"]
    - name: age
      type: integer
      description: User's age
      required: true
      minimum: 0
      maximum: 150
      examples: [25]
    - name: is_active
      type: boolean
      description: Whether the user is active
      default: true
      examples: [true]
    - name: tags
      type: array
      description: User tags
      items:
        type: string
      minItems: 0
      maxItems: 10
      examples: [["beta", "early-access"]]
    - name: preferences
      type: object
      description: User preferences
      required: [notifications]
      properties:
        notifications:
          type: boolean
          description: Whether notifications are enabled
        theme:
          type: string
          description: Theme preference
          enum: [light, dark]
  return:
    name: result
    type: array
    description: List of user records
    items:
      type: object
      properties:
        name:
          type: string
        age:
          type: integer
        is_active:
          type: boolean
        tags:
          type: array
          items:
            type: string
        preferences:
          type: object
          properties:
            notifications:
              type: boolean
            theme:
              type: string
  source:
    code: |
      SELECT 
        $name as name,
        $age as age,
        $is_active as is_active,
        $tags as tags,
        $preferences as preferences
      FROM (VALUES (1)) t
  tests:
    - name: Hello World test
      description: Tests a hello world endpoint
      arguments:
        - key: name
          value: World
      result: Hello, World!
metadata:
  title: Hello world
  description: Hello world example
  tags:
    - helloworld